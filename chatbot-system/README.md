# AIチャットボットシステム

> Dialogflow CX + Vertex AI (Gemini) によるWebサイト埋め込み型チャットボット

## 概要

長期インターン先のクライアント企業向けに開発した、AIチャットボットシステムです。
Google Cloud の Dialogflow CX と Vertex AI（Gemini）を活用し、Webサイトに埋め込み可能なチャットボットを構築しました。顧客からの問い合わせに24時間自動応答します。

---

## 課題

- 営業時間外の問い合わせに対応できない
- 定型的な質問への回答に人的リソースがかかる
- FAQページだけでは顧客が必要な情報を見つけられない

## 解決策

Google Cloud の Dialogflow CX と Vertex AI（Gemini）を活用し、Webサイトに埋め込み可能なAIチャットボットを開発。ナレッジベースを参照して正確な回答を生成します。

---

## システム構成

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   Webサイト      │────▶│  Dialogflow CX  │────▶│   Vertex AI     │
│ (df-messenger)  │     │    (Agent)      │     │  (Gemini 2.5)   │
└─────────────────┘     └────────┬────────┘     └─────────────────┘
                                 │
                                 ▼
                        ┌─────────────────┐
                        │  Data Store     │
                        │ (ナレッジベース)  │
                        └─────────────────┘
```

---

## 主な機能

| 機能 | 説明 |
|------|------|
| Playbookによる回答生成 | 生成AIが自然な対話形式で回答 |
| ナレッジベース参照 | 企業情報・サービス内容を正確に回答 |
| df-messenger | Googleが提供するWebウィジェットで簡単埋め込み |
| トークン管理 | 会話履歴の長さに応じたトークン制限設定 |

---

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| AI/LLM | Vertex AI (Gemini 2.5 Flash) |
| 対話基盤 | Google Dialogflow CX (Playbook) |
| ナレッジ | Data Store |
| フロントエンド | df-messenger（Webウィジェット） |

---

## 設定のポイント

| 項目 | 推奨設定 |
|------|---------|
| Model | gemini-2.5-flash |
| Input token limit | Up to 32k |
| Output token limit | Up to 2048 |
| Temperature | 0.3〜0.5（安定性重視） |

---

## 成果

- **24時間対応**: 営業時間外の問い合わせにも即時回答
- **業務負荷軽減**: 定型的な質問への自動応答

---

## 工夫した点

1. **ハルシネーション対策**
   - ナレッジベースに情報がない場合は「その情報はございません」と正直に回答
   - プロンプトで回答範囲を明確に制限

2. **トークン管理**
   - Input token limitを32kに設定し、長い会話履歴にも対応
   - Output token limitを2048に設定し、十分な回答長を確保

3. **Temperature調整**
   - 安定した回答のため低めの値（0.3〜0.5）を設定
   - ハルシネーションのリスクを低減

---

## 学んだこと

- Google Cloud の AI/ML サービス（Dialogflow CX, Vertex AI）の活用
- 生成AIのプロンプト設計（ハルシネーション対策）
- ナレッジベースの構築と運用
- Webウィジェット（df-messenger）の埋め込み実装
